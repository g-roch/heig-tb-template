%! Author = Gaby Roch
%! Date = 15.10.21

% Preamble
%\documentclass[a4paper,oneside,12pt,french,draft]{heig-tb}
%\documentclass[a4paper,twoside,12pt,french,draft]{heig-tb}
\documentclass[a4paper,twoside,12pt,french]{heig-bachelor}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% package include
%
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{listofitems}
\usepackage[
    style=alphabetic,
%    style=reading,
%    style=numeric,
%    notetype=foot+end,
]{biblatex}
\usepackage{lipsum}

\usepackage{subfiles}

%\usepackage{catchfile}

% on utilise un index
\usepackage{imakeidx}
\makeindex

% On charge les métas informations du TB
\input{_meta}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definition of custom command
%
% define \autofootcite{list of bibentry} % cite in footnote with bibmark, work for multiple entry separated by comma (,)
\let\originalcite\cite
\let\originalfullcite\fullcite
\newcommand{\autofootcite}[1]{{% Group to localize change to footnote
    \originalcite{#1}%
    \readlist*\mylist{#1}%
    \foreachitem\x\in\mylist[]{%
        \renewcommand{\thefootnote}{\originalcite{\x}}% Update footnote counter representation
        \footnotetext[0]{\originalfullcite{\x}}% Print footnote text
    }%
}}% Print footnote text


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Use custom command as default
%
\let\autocite\autofootcite
\let\cite\autofootcite


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Configuration du répertoire pour les images
%
\graphicspath{ {./images} }
\bibliography{biblio}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\begin{document}

    \frontmatter
    \maketitle

    \begin{abstract}
        Le contenu du résumé publiable
    \end{abstract}

    \makeatletter % Required for \@ macro
    \begin{signedpage}{Préambule}{\@shortschool\\[0.5em] Le Chef du Département}{\@location}{\@date}

        Ce travail de Bachelor (ci-après TB) est réalisé en fin de cursus d’études, en vue de l’obtention du titre de Bachelor of Science HES-SO en \@bachelorof.

        En tant que travail académique, son contenu, sans préjuger de sa valeur, n'engage ni la responsabilité de l'auteur, ni celles du jury du travail de Bachelor et de l'École.

        Toute utilisation, même partielle, de ce TB doit être faite dans le respect du droit d’auteur.
    \end{signedpage}

    \begin{signedpage}{Authentification}{\@author}{\@location}{\@date}
        \if@authorgenderfem La soussignée\else Le soussigné\fi, \@author,
        atteste par la présente avoir réalisé
        \if@authorgenderfem seule\else seul\fi
        ce travail et n’avoir utilisé aucune autre source que celles expressément mentionnées.
    \end{signedpage}
    \makeatother

    \summary

    \mainmatter


    \chapter{Cahier des charges}
    \subfile{content/cahier-des-charges}
    \subfile{content/example}


    \backmatter

    \tableofcontents
    \listoffigures
    \listoftables
    \printbibliography
    \printindex
    \lstlistoflistings

    % Glossaire
    % Abréviations


\end{document}
